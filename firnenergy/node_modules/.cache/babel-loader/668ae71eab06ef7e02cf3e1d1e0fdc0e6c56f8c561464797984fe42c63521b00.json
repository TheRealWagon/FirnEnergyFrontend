{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Dirk Verdoodt/Documents/eniris data/react website/firnenergy/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Dirk Verdoodt/Documents/eniris data/react website/firnenergy/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Dirk Verdoodt/Documents/eniris data/react website/firnenergy/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import User from'../../../../api/user';import{useNavigate}from'react-router-dom';import UserDisplay from'./userDisplay';import'./usersList.css';import Authenticate from'../../../../api/authenticate';import{jsx as _jsx}from\"react/jsx-runtime\";var UsersList=function UsersList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),reloadUserList=_useState4[0],setReloadUserList=_useState4[1];var userApi=User();var navigate=useNavigate();useEffect(function(){setReloadUserList(false);var ConfirmUserRole=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token,user,_users;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:token=localStorage.getItem('jwtToken');_context.prev=1;_context.next=4;return userApi.GetUsername(token);case 4:user=_context.sent;if(!(user.data.user.role!='ADMIN')){_context.next=7;break;}throw Error;case 7:_context.next=9;return userApi.GetUserData(token);case 9:_users=_context.sent;setUsers(_users.data);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);//token expired or invalid navigate to Login\nlocalStorage.removeItem('jwtToken');navigate('/');case 17:case\"end\":return _context.stop();}},_callee,null,[[1,13]]);}));return function ConfirmUserRole(){return _ref.apply(this,arguments);};}();ConfirmUserRole();},[reloadUserList]);var RefreshUserListPage=function RefreshUserListPage(){setReloadUserList(true);};// const [data, setData] = useState([]);\n// const AuthApi = Authenticate();\n// useEffect(() => {\n//     const retrievedata = async() => {\n//         const JwtToken = localStorage.getItem('jwtToken');\n//         const AccessToken = await userApi.GetAccessToken(JwtToken);\n//         console.log(AccessToken)\n//         const dete = await AuthApi.Devices(AccessToken);\n//         setData(dete);\n//     }\n//     retrievedata();\n// }, [])\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"UserList-Container\",children:users.map(function(user,index){return/*#__PURE__*/_jsx(\"div\",{className:\"UserSet\",children:/*#__PURE__*/_jsx(UserDisplay,{email:user.email,password:user.password,deviceId:user.deviceid,enirisEmail:user.enirisEmail,enirisPassword:user.enirisPassword,RefreshUserListPage:RefreshUserListPage})},index);})})// <div>\n//     {data}\n// </div>\n;};export default UsersList;","map":{"version":3,"names":["useEffect","useState","User","useNavigate","UserDisplay","Authenticate","jsx","_jsx","UsersList","_useState","_useState2","_slicedToArray","users","setUsers","_useState3","_useState4","reloadUserList","setReloadUserList","userApi","navigate","ConfirmUserRole","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","user","_users","wrap","_callee$","_context","prev","next","localStorage","getItem","GetUsername","sent","data","role","Error","GetUserData","t0","removeItem","stop","apply","arguments","RefreshUserListPage","className","children","map","index","email","password","deviceId","deviceid","enirisEmail","enirisPassword"],"sources":["C:/Users/Dirk Verdoodt/Documents/eniris data/react website/firnenergy/src/components/body/admin/users/usersList.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport User from '../../../../api/user';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport UserDisplay from './userDisplay';\r\nimport './usersList.css'\r\n\r\nimport Authenticate from '../../../../api/authenticate'\r\n\r\nconst UsersList = () => {\r\n\r\n    const [users, setUsers] = useState([]);\r\n    const [reloadUserList, setReloadUserList] = useState(false);\r\n\r\n    const userApi = User();\r\n    const navigate = useNavigate();\r\n    \r\n    useEffect(() => {\r\n\r\n        setReloadUserList(false)\r\n\r\n        const ConfirmUserRole = async () => {\r\n            const token = localStorage.getItem('jwtToken');\r\n            try {\r\n                const user = await userApi.GetUsername(token);\r\n\r\n                if (user.data.user.role != 'ADMIN') {\r\n                    throw Error;\r\n                }\r\n\r\n                //get the users\r\n                const users = await userApi.GetUserData(token);\r\n                setUsers(users.data);\r\n\r\n            } catch (error) {\r\n                //token expired or invalid navigate to Login\r\n                localStorage.removeItem('jwtToken');\r\n                navigate('/');\r\n            }\r\n        }\r\n        ConfirmUserRole();\r\n        \r\n    }, [reloadUserList]);\r\n\r\n    const RefreshUserListPage = () => {\r\n        setReloadUserList(true);\r\n    }\r\n\r\n    // const [data, setData] = useState([]);\r\n    // const AuthApi = Authenticate();\r\n\r\n    // useEffect(() => {\r\n        \r\n    //     const retrievedata = async() => {\r\n    //         const JwtToken = localStorage.getItem('jwtToken');\r\n    //         const AccessToken = await userApi.GetAccessToken(JwtToken);\r\n    //         console.log(AccessToken)\r\n    //         const dete = await AuthApi.Devices(AccessToken);\r\n    //         setData(dete);\r\n    //     }\r\n    //     retrievedata();\r\n\r\n    // }, [])\r\n\r\n    return (\r\n        <div className=\"UserList-Container\">\r\n            {users.map((user, index) => (\r\n                <div key={index} className=\"UserSet\">\r\n                <UserDisplay\r\n                    email={user.email}\r\n                    password={user.password}\r\n                    deviceId={user.deviceid}\r\n                    enirisEmail={user.enirisEmail}\r\n                    enirisPassword={user.enirisPassword}\r\n                    RefreshUserListPage={RefreshUserListPage}\r\n                />\r\n                </div>\r\n            ))}\r\n        </div>\r\n        // <div>\r\n        //     {data}\r\n        // </div>\r\n    )\r\n\r\n}\r\n\r\nexport default UsersList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}